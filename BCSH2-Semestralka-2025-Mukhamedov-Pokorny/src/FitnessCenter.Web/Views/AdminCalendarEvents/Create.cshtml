@model FitnessCenter.Web.Models.Lessons.CalendarEventCreateViewModel

@{
    var isEdit = Model.Id.HasValue;
    ViewData["Title"] = isEdit ? "Upravit akci v kalendáři" : "Nová akce v kalendáři";
    Layout = "_AppLayout";

    ViewBag.HideMainNav = true;
}

<div class="glass p-3 mb-3">
    <div class="d-flex justify-content-between align-items-center">
        <div>
            <a class="btn btn-outline-light me-2"
               href="@Url.Action("Calendar", "AdminLessons", new { year = Model.Date.Year, month = Model.Date.Month })">
                ← Zpět na kalendář
            </a>
            <span class="h4 text-white mb-0">
                @(isEdit ? "Upravit akci v kalendáři" : "Nová akce v kalendáři")
            </span>
            <div class="text-white-50 small mt-1">
                Vybraný den: @Model.Date.ToString("dd.MM.yyyy")
            </div>
        </div>
    </div>
</div>

<div class="glass p-3">

    @* TADY JEDNODUCHÁ HLÁŠKA KDYŽ JE FORMULÁŘ NEPLATNÝ *@
    @if (!ViewData.ModelState.IsValid &&
        string.Equals(Context.Request.Method, "POST", System.StringComparison.OrdinalIgnoreCase))
    {
        <div class="alert alert-danger mb-3">
            Vyplň prosím <strong>název / typ akce</strong> a <strong>popis akce</strong>.
        </div>
    }

    <form asp-action="@(isEdit ? "Edit" : "Create")" method="post" class="row g-3">
        @Html.AntiForgeryToken()

        @* zobrazení všech detailních chyb, kdybys je chtěl *@
        <div asp-validation-summary="All" class="text-danger small mb-2"></div>

        @* ID pro edit *@
        @if (isEdit)
        {
            <input type="hidden" asp-for="Id" />
        }

        <!-- DATUM -->
        <div class="col-12 col-md-4">
            <label class="form-label text-white">Datum akce</label>

            <input class="form-control"
                   value="@Model.Date.ToString("dd.MM.yyyy")"
                   readonly />

            @* Skutečný hodnota pro model *@
            <input type="hidden" asp-for="Date" />

            <span asp-validation-for="Date" class="text-danger small"></span>
        </div>

        <!-- NÁZEV / TYP -->
        <div class="col-12 col-md-4">
            <label asp-for="Type" class="form-label text-white"></label>
            <input asp-for="Type"
                   class="form-control"
                   placeholder="např. Změna otevírací doby, Servis, Info..." />
            <span asp-validation-for="Type" class="text-danger small"></span>
        </div>

        <!-- TEXT -->
        <div class="col-12">
            <label asp-for="Text" class="form-label text-white"></label>
            <textarea asp-for="Text"
                      class="form-control"
                      rows="3"
                      placeholder="Např.: Otevřeno 9:00–20:00 (místo 8:00–22:00)."></textarea>
            <span asp-validation-for="Text" class="text-danger small"></span>
        </div>

        <div class="col-12 mt-3">
            <button type="submit" class="btn btn-warning">
                @(isEdit ? "Uložit změny" : "Uložit akci")
            </button>

            <a class="btn btn-outline-light ms-2"
               href="@Url.Action("Calendar", "AdminLessons", new { year = Model.Date.Year, month = Model.Date.Month })">
                Zrušit
            </a>
        </div>
    </form>
</div>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}