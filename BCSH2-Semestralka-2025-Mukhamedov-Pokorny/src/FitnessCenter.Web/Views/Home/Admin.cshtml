@{
    ViewData["Title"] = "Admin – Přehled";
    Layout = "_AppLayout";
    ViewBag.Active = ViewBag.Active ?? "Admin";

    int membersCount = ViewBag.MembersCount is int mc ? mc : 0;
    int trainersCount = ViewBag.TrainersCount is int tc ? tc : 0;
    int lessonsToday = ViewBag.LessonsToday is int lt ? lt : 0;
    int pendingPayments = ViewBag.PendingPayments is int pp ? pp : 0;
    int adminMessagesCnt = ViewBag.AdminMessagesCnt is int am ? am : 0;

    DateTime today = ViewBag.Today is DateTime d ? d : DateTime.Today;
}

<!-- Úvodní panel -->
<div class="glass p-3 mb-4">
    <div class="d-flex align-items-center justify-content-between flex-wrap">
        <div>
            <h3 class="text-white mb-1">Ahoj, admine @(User.Identity?.Name ?? "") 👋</h3>
            <div class="text-white-50">Dnes je @today.ToString("dddd d. MMMM yyyy")</div>
        </div>
        <div class="mt-2 mt-md-0">
            <a href="@Url.Action("Create", "Members")" class="btn btn-sm btn-warning">
                + Přidat člena
            </a>
            </a>
        </div>
    </div>

    <hr class="border-secondary my-3" />

    <div class="row g-3">
        <!-- Stat: Členové -->
        <div class="col-12 col-sm-6 col-xl-3">
            <div class="tile glass h-100">
                <div class="d-flex justify-content-between">
                    <h5 class="text-white mb-2">Členové</h5>
                    <span class="badge bg-info">@membersCount</span>
                </div>
                <div class="text-white-50 small mb-2">Aktivní záznamy v systému.</div>
                <a class="stretched-link" href="@Url.Action("Index", "Members")"></a>
            </div>
        </div>

        <!-- Stat: Trenéři -->
        <div class="col-12 col-sm-6 col-xl-3">
            <div class="tile glass h-100">
                <div class="d-flex justify-content-between">
                    <h5 class="text-white mb-2">Trenéři</h5>
                    <span class="badge bg-info">@trainersCount</span>
                </div>
                <div class="text-white-50 small mb-2">Správa trenérů a kvalifikací.</div>
                <a class="stretched-link" href="@Url.Action("Index", "AdminTrainers")"></a>
            </div>
        </div>

        <!-- Stat: Dnešní lekce -->
        <div class="col-12 col-sm-6 col-xl-3">
            <div class="tile glass h-100">
                <div class="d-flex justify-content-between">
                    <h5 class="text-white mb-2">Přehled Lekcí</h5>
                    <span class="badge bg-warning">@lessonsToday</span>
                </div>
                <div class="text-white-50 small mb-2">Rozvrh a kapacity.</div>
                <a class="stretched-link" href="@Url.Action("Index", "AdminLessons")"></a>
            </div>
        </div>

        <!-- Stat: Zprávy (místo Ke schválení) -->
        <div class="col-12 col-sm-6 col-xl-3">
            <div class="tile glass h-100">
                <div class="d-flex justify-content-between">
                    <h5 class="text-white mb-2">Zprávy</h5>
                    <span class="badge bg-danger">@adminMessagesCnt</span>
                </div>
                <div class="text-white-50 small mb-2">Nástěnka pro adminy a trenéry.</div>
                <a class="stretched-link" href="@Url.Action("Index", "Messages")"></a>
            </div>
        </div>
    </div>
</div>


<!-- Rychlé akce -->
<div class="glass p-3">
    <div class="d-flex align-items-center justify-content-between flex-wrap">
        <h4 class="text-white mb-0">Rychlé akce</h4>
    </div>

    <div class="row g-3 mt-1">
        <!-- Log operací -->
        <div class="col-12 col-md-6 col-xl-3">
            <div class="tile glass quick-tile position-relative h-100">
                <h5 class="text-white mb-1">Log operací</h5>
                <div class="text-white-50 small">Poslední záznamy: <strong>@((int)(ViewBag.LogCount ?? 0))</strong></div>
                <a href="@Url.Action("Index", "AdminLogs")" class="stretched-link"></a>
            </div>
        </div>

        <!-- Správa uživatelů -->
        <div class="col-12 col-md-6 col-xl-3">
            <div class="tile glass quick-tile position-relative h-100">
                <h5 class="text-white mb-1">Správa uživatelů</h5>
                <div class="text-white-50 small">Přidat/upravit/odebrat členy.</div>
                <a href="@Url.Action("Index", "Members")" class="stretched-link"></a>
            </div>
        </div>

        <!-- Lekce & rozvrh (pro admina!) -->
        <div class="col-12 col-md-6 col-xl-3">
            <div class="tile glass quick-tile position-relative h-100">
                <h5 class="text-white mb-1">Lekce & rozvrh</h5>
                <div class="text-white-50 small">Plánování, kapacity, lektoři.</div>
                <a href="@Url.Action("Index", "AdminLessons")" class="stretched-link"></a>
            </div>
        </div>

        <!-- Platby -->
        <div class="col-12 col-md-6 col-xl-3">
            <div class="tile glass quick-tile position-relative h-100">
                <h5 class="text-white mb-1">Platby</h5>
                <div class="text-white-50 small">Neuhrazené: <strong>@pendingPayments</strong></div>
                <a href="@Url.Action("Index", "Payments")" class="stretched-link"></a>
            </div>
        </div>

        <!-- Zprávy -->
        <div class="col-12 col-md-6 col-xl-3">
            <div class="tile glass quick-tile position-relative h-100">
                <h5 class="text-white mb-1">Zprávy</h5>
                <div class="text-white-50 small">Napsat oznámení pro tým.</div>
                <a href="@Url.Action("Index", "Messages")" class="stretched-link"></a>
            </div>
        </div>
    </div>
</div>
