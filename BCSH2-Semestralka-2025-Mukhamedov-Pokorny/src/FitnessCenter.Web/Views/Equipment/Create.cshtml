@model FitnessCenter.Web.Models.EquipmentEditViewModel
@using Microsoft.AspNetCore.Mvc.Rendering
@{
    Layout = "_AppLayout";
    var fitness = ViewBag.FitnessCenters as IEnumerable<SelectListItem>
                  ?? ViewBag.Fitka as IEnumerable<SelectListItem>
                  ?? Enumerable.Empty<SelectListItem>();
    ViewBag.HideMainNav = true;
}

<div class="d-flex justify-content-between align-items-center mb-3">
    <div>
        <a class="btn btn-outline-light me-2"
           href="@Url.Action("Index", "Equipment")"
           onclick="if (history.length > 1) { history.back(); return false; }">← Zpět</a>
        <span class="h4 text-white align-middle">Přidat vybavení</span>
    </div>
</div>

@if (!ViewData.ModelState.IsValid &&
    string.Equals(Context.Request.Method, "POST", System.StringComparison.OrdinalIgnoreCase))
{
    <div class="alert alert-danger mb-3">
        Vyplň prosím <strong>název vybavení</strong>, <strong>typ</strong>,
        <strong>stav</strong> a <strong>fitness centrum</strong>.
    </div>
}

<form asp-action="Create" asp-controller="Equipment" method="post" novalidate>
    @Html.AntiForgeryToken()

    <div asp-validation-summary="All" class="text-danger small mb-2"></div>

    <div class="mb-3">
        <label class="form-label text-white" for="Nazev">Název</label>
        <input name="Nazev" id="Nazev" class="form-control" value="@Model?.Nazev" />
        <span class="text-danger small" asp-validation-for="Nazev"></span>
    </div>

    <div class="row g-3">
        <div class="col-sm-4">
            <label class="form-label text-white">Typ</label>
            <select name="Typ" class="form-select">
                <option value="K" @(Model?.Typ == "K" ? "selected" : null)>Kardio</option>
                <option value="P" @(Model?.Typ == "P" ? "selected" : null)>Posilovací</option>
                <option value="V" @(Model?.Typ == "V" ? "selected" : null)>Volná závaží</option>
            </select>
            <span class="text-danger small" asp-validation-for="Typ"></span>
        </div>

        <div class="col-sm-4">
            <label class="form-label text-white">Stav</label>
            <select name="Stav" class="form-select">
                <option value="OK" @(Model?.Stav == "OK" ? "selected" : null)>OK</option>
                <option value="Oprava" @(Model?.Stav == "Oprava" ? "selected" : null)>Oprava</option>
                <option value="Mimo provoz" @(Model?.Stav == "Mimo provoz" ? "selected" : null)>Mimo provoz</option>
            </select>
            <span class="text-danger small" asp-validation-for="Stav"></span>
        </div>

        <div class="col-sm-4">
            <label class="form-label text-white">Fitness centrum</label>
            <select name="FitkoId" class="form-select">
                <option value="">— Vyber fitness centrum —</option>
                @foreach (var it in fitness)
                {
                    var sel = (Model != null && Model.FitkoId.ToString() == it.Value) ? "selected" : null;
                    <option value="@it.Value" @sel>@it.Text</option>
                }
            </select>
            <span class="text-danger small" asp-validation-for="FitkoId"></span>
        </div>
    </div>

    <div class="mt-3 d-flex gap-2">
        <button type="submit" class="btn btn-warning">Uložit</button>
        <a class="btn btn-secondary" href="@Url.Action("Index", "Equipment")">Zrušit</a>
    </div>
</form>

@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
